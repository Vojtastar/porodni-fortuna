<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Porodn√≠ Fortuna üçÄ</title>
<style>
body { font-family: Arial, sans-serif; max-width: 500px; margin: 40px auto; background-color: #f0fff0; padding: 20px; border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,0.1);}
h2 { text-align: center; color: #2e7d32; }
p { font-size: 16px; line-height: 1.5; }
input, button { width: 100%; padding: 10px; margin: 6px 0; border-radius: 6px; border: 1px solid #2e7d32; }
button { background-color: #2e7d32; color: white; cursor: pointer; }
button:hover { background-color: #1b5e20; }
table { border-collapse: collapse; width: 100%; margin-top: 10px; }
table, th, td { border: 1px solid #2e7d32; }
th, td { padding: 6px; text-align: center; }
.actions button { padding: 2px 6px; font-size: 12px; cursor: pointer; }
</style>
</head>
<body>

<h2>Porodn√≠ Fortuna üçÄ</h2>

<p>
Mil√≠ kamar√°di a rodino! üéâ<br>
Vyberte datum porodu a tipovan√© jm√©no na≈°eho miminka, napi≈°te sv√© jm√©no a tip ulo≈æte.  
V√Ωherce bude odmƒõnƒõn l√°hv√≠ <strong>alkomoku</strong>! üçæ
</p>

<input type="text" id="player" placeholder="Tvoje jm√©no">
<input type="text" id="babyName" placeholder="Tipovan√© jm√©no miminka">
<input type="date" id="date" min="2026-02-07" max="2026-02-28">

<button onclick="saveTip()">Ulo≈æit tip</button>

<h3>Vsazen√© tipy:</h3>
<table>
    <thead>
        <tr>
            <th>Jm√©no</th>
            <th>Tipovan√© jm√©no miminka</th>
            <th>Tipovan√© datum</th>
            <th>Akce</th>
        </tr>
    </thead>
    <tbody id="tipsTable"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

// Firebase konfigurace
const firebaseConfig = {
  apiKey: "AIzaSyDRReoW_oKVWmHxrDJlszanlaWFQvN38tY",
  authDomain: "porodni-fortuna.firebaseapp.com",
  databaseURL: "https://porodni-fortuna-default-rtdb.firebaseio.com",
  projectId: "porodni-fortuna",
  storageBucket: "porodni-fortuna.firebasestorage.app",
  messagingSenderId: "312677466546",
  appId: "1:312677466546:web:cc89ab54112b80520124ab"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const tipsTable = document.getElementById("tipsTable");

function saveTip() {
    const player = document.getElementById("player").value.trim();
    const babyName = document.getElementById("babyName").value.trim();
    const date = document.getElementById("date").value;
    if (!player || !babyName || !date) { alert("Vypl≈à v≈°echna pole!"); return; }
    push(ref(db, 'tips'), { owner: player, babyName, date });
    clearForm();
}

function clearForm() {
    document.getElementById("player").value = "";
    document.getElementById("babyName").value = "";
    document.getElementById("date").value = "";
}

// Naƒç√≠t√°n√≠ tip≈Ø ≈æivƒõ
onValue(ref(db, 'tips'), snapshot => {
    const tips = snapshot.val() || {};
    tipsTable.innerHTML = "";
    Object.keys(tips).forEach(key => {
        const tip = tips[key];
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${tip.owner}</td>
            <td>${tip.babyName}</td>
            <td>${tip.date}</td>
            <td><button onclick="removeTip('${key}')">Smazat</button></td>
        `;
        tipsTable.appendChild(tr);
    });
});

function removeTip(key) {
    remove(ref(db, 'tips/' + key));
}
</script>

</body>
</html>
